# 実装計画

- [ ] 1. 基盤コンポーネントとユーティリティを構築する
- [ ] 1.1 機能名生成ロジックを実装する
  - テキストをURLフレンドリーなスラッグに変換する機能を作成する。
  - 既存の名前のリストと照合し、名前が重複している場合に数字のサフィックスを追加して一意性を確保するロジックを実装する。
  - _Requirements: 2.1, 2.2_

- [ ] 1.2 ファイルシステム操作サービスを実装する
  - ディレクトリ内の既存の仕様名を読み取る機能を作成する。
  - 新しいディレクトリを作成する機能を追加する。
  - 指定されたパスにファイルの内容を書き込む機能を実装する。
  - _Requirements: 1.2, 1.3, 1.4_

- [ ] 1.3 コアデータモデルを定義する
  - `spec.json`の構造を表すTypeScriptインターフェース（`Spec`, `ApprovalState`）を定義する。
  - サービス間で受け渡される結果オブジェクトの型を定義する。
  - _Requirements: 3.1, 3.2, 3.3_

- [ ] 2. コアビジネスロジックを実装する
- [ ] 2.1 仕様初期化のメインサービスを実装する
  - 機能名生成サービスを利用して、プロジェクト説明文から一意の機能名を取得する。
  - ファイルシステムサービスを利用して、仕様ディレクトリを作成する。
  - `spec.json`のデータ構造を構築し、ファイルシステムサービス経由で書き込む。
  - `requirements.md`のテンプレート内容を構築し、ファイルシステムサービス経由で書き込む。
  - _Requirements: 1.1, 1.2, 1.3, 1.4, 2.1, 2.2, 3.1, 3.2, 3.3, 4.1, 4.2_

- [ ] 3. CLIとの統合を行う
- [ ] 3.1 コマンドコントローラを実装する
  - CLIフレームワークからコマンド引数（プロジェクト説明文）を受け取る。
  - 仕様初期化サービスを呼び出し、処理を実行する。
  - サービスから返された結果（生成された機能名、パス）を整形し、コンソールに出力する。
  - _Requirements: 1.5_

- [ ] 3.2 `spec-init`コマンドをCLIアプリケーションに登録する
  - メインのCLIエントリーポイントに新しいコマンドを追加し、コントローラに接続する。
  - _Requirements: 1.1_

- [ ] 4. テストを実装する
- [ ] 4.1 機能名生成サービスのユニットテストを作成する
  - 正常なスラッグ生成をテストする。
  - 名前の衝突が発生した場合に、正しくサフィックスが追加されることをテストする。

- [ ] 4.2 仕様初期化サービスのユニットテストを作成する
  - ファイルシステムサービスをモック化する。
  - サービスの各メソッドが正しい引数で、期待される順序で呼び出されることを検証する。

- [ ] 4.3 `spec-init`コマンドのインテグレーションテストを作成する
  - 一時的なテストディレクトリ内でコマンドをプログラム的に実行する。
  - 期待されるディレクトリ構造とファイルが、正しい内容で作成されていることをアサートする。
