# 要求仕様書

## 導入

本機能は、プロジェクト説明文から新しい仕様策定の初期構造を自動生成するコマンドを提供します。開発者が迅速に仕様駆動開発（Spec-Driven Development）ワークフローを開始できるようにすることで、開発効率を向上させることを目的とします。

## 要求事項

### 要求1: 仕様初期化コマンドの実行

**目的:** 開発者として、プロジェクト説明文から新しい仕様の構造を初期化したい。これにより、効率的に仕様策定プロセスを開始できるようになる。

#### 受入基準1

1. WHEN `spec-init` コマンドがプロジェクト説明文と共に実行された場合, THEN Kiro CLI は、その説明文から一意の機能名を生成しなければならない。
2. WHEN `spec-init` コマンドが実行された場合, THEN Kiro CLI は、`.kiro/specs/[生成された機能名]` に新しいディレクトリを作成しなければならない。
3. WHEN `spec-init` コマンドが実行された場合, THEN Kiro CLI は、新しいディレクトリ内に `spec.json` ファイルを作成しなければならない。
4. WHEN `spec-init` コマンドが実行された場合, THEN Kiro CLI は、新しいディレクトリ内に `requirements.md` ファイルを作成しなければならない。
5. WHEN `spec-init` コマンドが正常に完了した場合, THEN Kiro CLI は、生成された機能名と作成された `spec.json` へのパスを出力しなければならない。

### 要求2: 機能名の生成

**目的:** 開発者として、システムに一意で分かりやすい機能名を生成してほしい。これにより、仕様を容易に識別できるようになる。

#### 受入基準2

1. IF 生成された機能名が `.kiro/specs/` ディレクトリ内に既に存在する場合, THEN Kiro CLI は、一意になるまで新しい機能名に数字の接尾辞（例: `-2`, `-3`）を付与しなければならない。
2. WHERE 機能名が生成される場合, THE Kiro CLI は、URLフレンドリーなスラッグ形式（小文字、スペースの代わりにハイフン）で名前を作成しなければならない。

### 要求3: メタデータ初期化 (`spec.json`)

**目的:** 開発者として、`spec.json` ファイルが正しいメタデータで初期化されてほしい。これにより、仕様の状態が正確に追跡されるようになる。

#### 受入基準3

1. WHERE `spec.json` ファイルが作成される場合, THE Kiro CLI は、`feature_name`, `created_at`, `updated_at`, `language` を設定し、`phase` を "initialized" に設定しなければならない。
2. WHERE `spec.json` ファイルが作成される場合, THE Kiro CLI は、`requirements`, `design`, `tasks` の `generated` と `approved` フラグを `false` に設定した `approvals` 構造を初期化しなければならない。
3. WHERE `spec.json` ファイルが作成される場合, THE Kiro CLI は、`ready_for_implementation` フラグを `false` に設定しなければならない。

### 要求4: 要求仕様書テンプレートの作成 (`requirements.md`)

**目的:** 開発者として、元のプロジェクト説明文を含む標準テンプレートで `requirements.md` ファイルを作成してほしい。これにより、要求定義を始めるための明確な出発点が得られる。

#### 受入基準

1. WHERE `requirements.md` ファイルが作成される場合, THE Kiro CLI は、コマンドに提供された全文を含む「プロジェクト説明文（入力）」セクションを記載しなければならない。
2. WHERE `requirements.md` ファイルが作成される場合, THE Kiro CLI は、「要求事項」セクションのプレースホルダーを記載しなければならない。
